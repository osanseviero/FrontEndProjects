<!DOCTYPE html>
<html>
<head>
  <title>Play videos - from udacity L2.7 L2.8</title>
  <style>
		#c {
      position: absolute;
      padding: 10px;
      top: 0;
      left: 0;
		}  

		#v {
			position: absolute;
		}
  </style>
</head>
<body>
  <canvas id="c"></canvas>
  <video id="v" controls loop muted src="mau.mp4"></video>
	<audio id="test" src="audio.mp3"></audio>

  <script type="text/javascript">
    var canvas = document.querySelector('canvas');
    var ctx = canvas.getContext('2d');

    document.addEventListener('DOMContentLoaded', function(){
      var v = document.querySelector('#v');
      var canvas = document.querySelector('#c');
      var ctx = canvas.getContext('2d')

      v.addEventListener('loadmetadata', function(){
        canvas.width = this.videoWidth;
        canvas.height = this.videoHeight;
      });

      var draw = function(){
        canvas.getContext('2d').drawImage(v, 0, 0);
        var vid = document.getElementById("v");
				vid.playbackRate = 0.5;
        requestAnimationFrame(draw);
      };

      v.addEventListener('play', function(){
        if (v.paused || v.ended) return;
        draw();
        document.getElementById('test').play();

      });
    });	
  </script>
</body>
</html>